(this.webpackJsonpCloseVax=this.webpackJsonpCloseVax||[]).push([[0],{201:function(t,e,n){},202:function(t,e,n){},224:function(t,e){},226:function(t,e){},236:function(t,e){},238:function(t,e){},265:function(t,e){},266:function(t,e){},271:function(t,e){},273:function(t,e){},280:function(t,e){},299:function(t,e){},322:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),i=n(15),s=n.n(i),r=(n(201),n(57)),o=n(58),l=n(60),u=n(59),d=(n(202),n(62)),h=n.n(d),j="https://cdn-api.co-vin.in/api",b=function(t){return new Promise((function(e,n){var a=JSON.stringify({mobile:t}),c={method:"post",url:"".concat(j,"/v2/auth/public/generateOTP"),headers:{"Content-Type":"application/json"},data:a};h()(c).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))},O=function(t,e){return new Promise((function(n,a){var c=JSON.stringify({otp:e,txnId:t}),i={method:"post",url:"".concat(j,"/v2/auth/public/confirmOTP"),headers:{"Content-Type":"application/json"},data:c};h()(i).then((function(t){n(t.data)})).catch((function(t){a(t)}))}))},f=function(t){return new Promise((function(e,n){var a={method:"get",url:"".concat(j,"/v2/admin/location/districts/").concat(t)};h()(a).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))},m=function(t,e){return new Promise((function(n,a){var c={method:"get",url:"".concat(j,"/v2/appointment/sessions/public/calendarByDistrict?district_id=").concat(t,"&date=").concat(e),headers:{Authorization:"Bearer "+localStorage.getItem("token")}};h()(c).then((function(t){n(t.data)})).catch((function(t){a(t)}))}))},g=n(111),p=n.n(g),v=function(t){return p.a.codec.hex.fromBits(p.a.hash.sha256.hash(t))},x=n(7),S=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).state={number:"",OTPSent:!1,OTP:"",error:null},t.onPhoneChange=function(e){t.setState({number:e.target.value})},t.onOTPChange=function(e){t.setState({OTP:e.target.value})},t.onGetOTP=function(){b(t.state.number).then((function(e){localStorage.setItem("txnId",e.txnId),t.setState({OTPSent:!0,error:null})})).catch((function(e){localStorage.setItem("txnId",null),t.setState({error:e.response.data,OTPSent:!1})}))},t.onConfirmOTP=function(){var e=localStorage.getItem("txnId");e?O(e,v(t.state.OTP)).then((function(e){localStorage.setItem("token",e.token),t.props.onSuccess(),t.setState({error:null})})).catch((function(e){console.log("error response",e.response),localStorage.setItem("token",""),t.setState({error:e.response.data.error,OTPSent:!1})})):console.error("No transaction ID found, retry the process")},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){localStorage.setItem("txnId",""),localStorage.setItem("token","")}},{key:"render",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{children:["Enter your phone number: ",Object(x.jsx)("input",{min:1,value:this.state.number,step:1,type:"number",onChange:this.onPhoneChange,title:"Phone number"}),Object(x.jsx)("button",{onClick:this.onGetOTP,children:"Get OTP"})]}),this.state.OTPSent?Object(x.jsxs)("div",{children:["Enter the OTP: ",Object(x.jsx)("input",{min:1,value:this.state.OTP,step:1,type:"number",onChange:this.onOTPChange,title:"OTP"}),Object(x.jsx)("button",{onClick:this.onConfirmOTP,children:"Confirm OTP"})]}):null,this.state.error?Object(x.jsx)("div",{children:"Error: ".concat(this.state.error)}):null]})}}]),n}(c.a.Component),C=n(27),y=n(69),P=n(360),T=n(8),D=n(28),I=n(361),k=n(9),w=function(t){var e=t.value,n=t.classes,a=t.style,c=100*e;return Object(x.jsx)(I.a,{className:n.progressBarCell,style:a,children:Object(x.jsx)("div",{className:n.progressBar,style:{width:"".concat(c,"%")},title:"".concat(c.toFixed(1),"%")})})};w.defaultProps={style:{}};var _=Object(k.a)((function(t){return{progressBarCell:{paddingLeft:t.spacing(1),paddingRight:t.spacing(1)},progressBar:{backgroundColor:t.palette.primary.light,float:"left",height:t.spacing(1)}}}),{name:"ProgressBarCell"})(w),F=function(t){var e,n=t.tableColumn,a=t.value,c=t.classes,i=t.children,s=t.style;return Object(x.jsx)(I.a,{className:c.highlightedCell,style:Object(C.a)({color:(e=a,e<3e3?"#F44336":e<5e3?"#FFC107":e<8e3?"#FF5722":"#009688"),textAlign:n.align},s),children:i})};F.defaultProps={style:{},tableColumn:{},children:void 0};var E=Object(k.a)((function(t){return{highlightedCell:{paddingLeft:t.spacing(1),paddingRight:t.spacing(1)}}}),{name:"HighlightedCell"})(F),A=["equal","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual"],N=function(t){return Object(x.jsx)(T.b,Object(C.a)({availableFilterOperations:A},t))},B=function(t){var e=t.value;return e?new Date(e).toTimeString():"NA"},M=function(t){return Object(x.jsx)(T.b,Object(C.a)({formatterComponent:B},t))},L=function(t){var e=t.column;return"discount"===e.name?Object(x.jsx)(_,Object(C.a)({},t)):"amount"===e.name?Object(x.jsx)(E,Object(C.a)({},t)):Object(x.jsx)(D.k.Cell,Object(C.a)({},t))},q=function(t){return t.id},G=function(t){var e=t.rows,n=Object(a.useState)([{name:"availability_at",title:"Availability At"},{name:"name",title:"Center Name"},{name:"address",title:"Address"},{name:"block_name",title:"Block Name"},{name:"pincode",title:"Pincode"},{name:"lat",title:"Latitude"},{name:"long",title:"Longitude"},{name:"from",title:"Open From"},{name:"to",title:"Open Till"},{name:"fee_type",title:"Fee Type"},{name:"date",title:"Date"},{name:"available_capacity",title:"Available Capacity"},{name:"min_age_limit",title:"Min Age Limit"},{name:"vaccine",title:"Vaccine"}]),c=Object(y.a)(n,1)[0],i=Object(a.useState)([{columnName:"name",align:"left"},{columnName:"address",align:"left"}]),s=Object(y.a)(i,1)[0],r=Object(a.useState)(["pincode","lat","long","available_capacity","min_age_limit"]),o=Object(y.a)(r,1)[0],l=Object(a.useState)(["availability_at"]),u=Object(y.a)(l,1)[0];return Object(x.jsx)(P.a,{children:Object(x.jsxs)(D.b,{rows:e,columns:c,getRowId:q,children:[Object(x.jsx)(D.a,{}),Object(x.jsx)(T.e,{}),Object(x.jsx)(T.p,{}),Object(x.jsx)(T.r,{defaultSorting:[{columnName:"availability_at",direction:"desc"},{columnName:"date",direction:"asc"}]}),Object(x.jsx)(T.h,{defaultGrouping:[],defaultExpandedGroups:[]}),Object(x.jsx)(T.q,{}),Object(x.jsx)(T.j,{}),Object(x.jsx)(T.m,{}),Object(x.jsx)(T.k,{}),Object(x.jsx)(T.l,{}),Object(x.jsx)(N,{for:o}),Object(x.jsx)(M,{for:u}),Object(x.jsx)(D.k,{columnExtensions:s,cellComponent:L}),Object(x.jsx)(D.h,{showSortingControls:!0}),Object(x.jsx)(D.e,{defaultOrder:c.map((function(t){return t.name}))}),Object(x.jsx)(D.f,{showFilterSelector:!0}),Object(x.jsx)(D.i,{showSelectAll:!0}),Object(x.jsx)(D.g,{}),Object(x.jsx)(D.j,{}),Object(x.jsx)(D.d,{}),Object(x.jsx)(D.c,{showSortingControls:!0})]})})},J=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).state={states:[],selectedState:"",districts:[],selectedDistrict:"",interval:1,startDate:(new Date).toISOString().split("T")[0],centers:[],executing:!1},t.getDistrictsAndSetDefault=function(e){f(e).then((function(e){t.setState({districts:e.districts,selectedDistrict:e.districts[0].district_id})}))},t.onIntervalChange=function(e){t.setState({interval:e.target.value})},t.startInterval=function(){t.executor=setInterval(t.executorMethod,1e3*t.state.interval),t.setState({executing:!0})},t.stopInterval=function(){clearInterval(t.executor),t.setState({executing:!1})},t.executorMethod=function(){var e=new Date(t.state.startDate),n=(e.getDate()>9?e.getDate():"0"+e.getDate())+"-"+(e.getMonth()>8?e.getMonth()+1:"0"+(e.getMonth()+1))+"-"+e.getFullYear();m(t.state.selectedDistrict,n).then((function(e){var n=Date.now(),a=[];e.centers.forEach((function(t){t.sessions.forEach((function(e){a.push(Object(C.a)(Object(C.a)({id:t.center_id.toString()+e.session_id.toString()+n.toString(),availability_at:n},e),t))}))})),t.setState({centers:t.state.centers.concat(a)})})).catch((function(e){localStorage.setItem("token",""),t.props.onError()}))},t.onExecute=function(){t.startInterval()},t.onStop=function(){t.stopInterval()},t.onDateChange=function(e){t.setState({startDate:e.target.value})},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this;new Promise((function(t,e){var n={method:"get",url:"".concat(j,"/v2/admin/location/states")};h()(n).then((function(e){t(e.data)})).catch((function(t){e(t)}))})).then((function(e){var n=e.states[0].state_id;t.setState({states:e.states,selectedState:n}),t.getDistrictsAndSetDefault(n)}))}},{key:"render",value:function(){var t=this;return Object(x.jsxs)("div",{className:"Dashboard",children:[Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{htmlFor:"state",children:"Select a state:"}),Object(x.jsx)("select",{name:"states",id:"states",value:this.state.selectedState,onChange:function(e){var n=e.target.value;t.setState({selectedState:n}),t.getDistrictsAndSetDefault(n)},children:this.state.states.map((function(t){return Object(x.jsx)("option",{value:t.state_id,children:t.state_name},t.state_id)}))})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{htmlFor:"district",children:"Select a district:"}),Object(x.jsx)("select",{name:"cars",id:"cars",value:this.state.selectedDistrict,onChange:function(e){t.setState({selectedDistrict:e.target.value})},children:this.state.districts.map((function(t){return Object(x.jsx)("option",{value:t.district_id,children:t.district_name},t.district_id)}))})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{htmlFor:"date",children:"Start date of week:"}),Object(x.jsx)("input",{type:"date",id:"date",name:"date",value:this.state.startDate,onChange:this.onDateChange})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{children:"Check slot every\xa0"}),Object(x.jsx)("input",{min:1,value:this.state.interval,step:1,type:"number",onChange:this.onIntervalChange,title:"Interval"}),Object(x.jsxs)("span",{children:["\xa0second",this.state.interval>1?"s":"","."]})]}),Object(x.jsx)("button",{disabled:this.state.executing,onClick:this.onExecute,children:this.state.executing?"Executing every ".concat(this.state.interval," seconds..."):"Execute"}),this.state.executing?Object(x.jsx)("button",{onClick:this.onStop,children:"Stop"}):null]}),Object(x.jsx)("div",{children:Object(x.jsx)(G,{rows:this.state.centers})})]})}}]),n}(c.a.Component),R=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).reload=function(){t.forceUpdate()},t}return Object(o.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{className:"App",children:localStorage.getItem("token")?Object(x.jsx)(J,{onError:this.reload}):Object(x.jsx)(S,{onSuccess:this.reload})})}}]),n}(c.a.Component),V=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,363)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,i=e.getLCP,s=e.getTTFB;n(t),a(t),c(t),i(t),s(t)}))};s.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(R,{})}),document.getElementById("root")),V()}},[[322,1,2]]]);
//# sourceMappingURL=main.60020ccb.chunk.js.map